{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {"url": "https://raw.githubusercontent.com/N-Oldroyd/N-Oldroyd.github.io/refs/heads/main/european_productivity_data.json"},
  "title": "Labour Productivity across European Countries",
  "vconcat":[
    {
    "width": 480,
    "encoding": {
      "x": {"field": "date", "type": "temporal", "title": "","scale": {"domain": {"param": "brush"}}},
      "y": {"field": "value", "type": "quantitative", "title": "Output per Hour, Annual Change (%)"},
      "color": {
        "condition": {
          "param": "hover",
          "field":"country",
          "type":"nominal",
          "legend": {"title": ""}
        },
        "value": "grey"
      },
      "opacity": {
        "condition": {
          "param": "hover",
          "value": 1
        },
        "value": 0.2
      }
    },
    "layer": [{
      "params": [{
        "name": "hover",
        "value": [{"country": "UK"}],
        "select": {
          "type": "point",
          "fields": ["country"],
          "on": "mouseover",
          "clear": "mouseout"        
        }
      }],
      "mark": {"type": "line", "strokeWidth": 1.5, "stroke": "transparent"}
    }, {
      "mark": {"type": "line", "strokeWidth": 1.5, "tooltip": {"content": "encoding"}}
    }, {
      "encoding": {
        "x": {"aggregate": "max", "field": "date"},
        "y": {"aggregate": {"argmax": "date"}, "field": "value"}
      },
      "layer": [{
      "mark": {"type": "circle"}
    }, {
      "mark": {"type": "text", "align": "left", "dx": 4},
      "encoding": {"text": {"field":"country", "type": "nominal"}}
    }]
  }]
},
{
    "width": 480,
    "height": 100,
    "mark": {"type": "line", "strokeWidth": 1},
    "params": [
      {"name": "brush", "select": {"type": "interval", "encodings": ["x"]}}
    ],
    "encoding": {
      "x": {"field": "date", "type": "temporal", "title": ""},
      "y": {
        "field": "value",
        "type": "quantitative",
        "axis": {"tickCount": 3, "grid": false},
        "title": "Output per Hour, Annual Change (%)"
      },
        "color": {"field": "country", "type": "nominal"}
      
    }
  }
  ]
}


